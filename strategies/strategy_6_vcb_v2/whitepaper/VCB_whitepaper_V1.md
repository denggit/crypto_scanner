# Volatility Compression Breakout（VCB）策略完整说明文档

> 适用场景：**高频 / 亚秒级不做，偏 1m–5m 短线自动化交易**
> 目标：**在 300+ 币种中，用高确定性的“波动率压缩 → 爆发”结构捕捉非对称收益**

---

## 一、策略的核心逻辑（先给结论）

这套策略不是在**预测方向**，而是在**等待结构性失衡**。

**一句话版本：**

> 当一个币种在短周期内出现 *真实波动率显著低于中周期背景波动率*，并且价格被“压”在狭窄区间内 → 只要价格脱离这个区间，行情往往不是
> 0.2%，而是 1%–3% 的连续运动。

所以策略分为三件事：

1. **如何判定“真的在压缩”**（而不是假平静）
2. **压缩后是否还“新鲜”**（避免等到失效）
3. **什么时候算突破，立刻执行**

---

## 二、压缩的“确定性”判定方法（核心）

### 2.1 为什么不用单一指标

| 方法      | 问题                   |
| ------- | -------------------- |
| 只用 ATR  | 会被整体降波动市场骗（ATR 一起下降） |
| 只用布林带   | 对不同价格尺度、不同币种不稳定      |
| 只排序 CVI | 无时间结构，容易陈旧           |

**结论：压缩一定要是“相对压缩”，而不是“绝对变小”。**

---

## 三、推荐的压缩判定（实盘可用版本）

### 3.1 ATR 相对收缩（主条件）

**K 线周期：1 分钟**

* `ATR_short = ATR(10)`
* `ATR_mid = ATR(60)`

判定条件：

```
ATR_short < 0.5 × ATR_mid
```

含义：

* 短期真实波动率显著低于中期背景
* 不是整体市场冷，而是**被压住**

> 经验区间：0.45–0.6，0.5 是稳定起点

---

### 3.2 布林带宽度收缩（确认条件）

* 布林带参数：`BB(20, 2)`
* 带宽计算：

```
BB_width = (Upper - Lower) / Middle
```

判定方式（二选一）：

* **方式 A（分位数）**

```
BB_width < 过去 N 根的 20% 分位
```

* **方式 B（相对均值）**

```
BB_width < 0.7 × BB_width_60_mean
```

> 推荐：**ATR 是主判据，BB 是过滤器**

---

### 3.3 最终压缩判定

```
IS_COMPRESSION =
    ATR(10) < 0.5 × ATR(60)
AND
    BB_width 显著收缩
```

---

## 四、压缩事件的生命周期（新鲜度机制）

### 4.1 为什么不能长期监控

如果 ATR(60) 持续下降，ATR(10) 与之趋同，则说明**结构性压缩已失效**，继续监控只会浪费注意力并制造假信号。

**压缩是事件，不是标签。**

---

### 4.2 Compression Event 设计

```
Compression Event
├── start_time
├── atr_ratio = ATR(10)/ATR(60)
├── bb_width_score
├── ttl（有效期）
```

#### TTL 建议

| 周期 | TTL |
| -- | --------- |
| 1m | 20–40 根 K |
| 5m | 8–15 根 K |

**失效规则：**

* 超过 TTL 未突破 → 丢弃
* `atr_ratio > 0.7` → 丢弃

---

## 五、突破执行逻辑（入场）

### 5.1 指标分工

* **ATR / BB**：仅用于“是否值得监控”
* **突破执行**：只看价格 + 成交量

ATR 不参与下单判断。

---

### 5.2 突破定义

**做多：**

```
Close > BB_upper
AND
Volume > MA(Volume, 20)
```

**做空：**

```
Close < BB_lower
AND
Volume > MA(Volume, 20)
```

---

### 5.3 下单方式

* 市价或 aggressive 限价
* 不等回踩（回踩属于另一策略）

---

## 六、建仓后的结构验证机制（关键补充）

> **VCB 不等“确认趋势”，而是给突破一次“自证清白”的机会。**

### 6.1 单次进场 + 结构验证原则

* 突破发生 → **立刻一次性进场**
* 接下来最多允许 **2 根 K 线的验证期**
* 验证期内只做一件事：

> **判断突破结构是否被否定**

---

### 6.2 结构性失败的判定（止损前置条件）

**核心锚点：压缩区间本体**（而非 BB 边缘）。

以做多为例：

```
Fail if:
    Close < compression_low - 0.2 × ATR(10)
```

含义：

* 若价格重新回到压缩区间内部，说明突破失败
* 允许 1–2 根回踩或震荡
* 不允许“结构被否定”

> ⚠️ 第 2 根不立即止损，第 3 根仍失败 → 平仓

---

## 七、平仓逻辑（止损 / 止盈）

### 7.1 止损（SL）——结构感知止损

**原则：结构否定优先，其次才是 ATR 兜底。**

**做多：**

```
SL_struct = compression_low
SL_atr    = Entry - 0.8 × ATR(60)
SL = max(SL_struct, SL_atr)
```

**做空：**

```
SL_struct = compression_high
SL_atr    = Entry + 0.8 × ATR(60)
SL = min(SL_struct, SL_atr)
```

---

### 7.2 止盈（TP）——按币种属性区分

#### 7.2.1 主流币（趋势延展较好）

```
MAJOR_COINS = [
  BTC, ETH, BNB, SOL, XRP, ADA, DOGE,
  AVAX, TON, TRX, DOT, MATIC, LTC, BCH
]
```

* 固定 R：`1.5R – 2.0R`
* 或 ATR 扩张反转止盈

---

#### 7.2.2 山寨币（脉冲为主）

* 固定 R：`2.0R – 2.5R`
* 不建议 ATR 长时间跟踪

---

### 7.3 Break-even 规则（必选）

```
浮盈 ≥ 1R → SL 移至 Entry（或 + 手续费）
```

---

## 八、系统架构

```
[Market Data]
      ↓
[Compression Scanner]
      ↓
[Compression Pool]
      ↓
[Breakout Watcher]
      ↓
[Order Executor]
      ↓
[Position / Risk Manager]
```

---

## 九、一句话总结

> **VCB 的核心不是“突破买”，而是：
> 只有当价格无法回到原本被压缩的结构中时，
> 才说明一次真正的波动释放已经开始。**
